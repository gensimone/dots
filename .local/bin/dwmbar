#!/bin/sh

# Handle lock file

LOCK="/tmp/dwmbar.lock"

trap "rm $LOCK; exit 0" EXIT

if [ -f "$LOCK" ]; then
    echo "Lock file exists: $LOCK"
    exit 1
elif ! touch $LOCK; then
    echo "Could not create lock file: $LOCK"
    exit 1
fi

echo "$$" >$LOCK

while true; do
    DATE="$(date '+%d %A %R')"
    BATTERY="$(acpi | head -1 | cut -d ',' -f 2)"
    xsetroot -name " $DATE -$BATTERY "
    sleep 1s
done
